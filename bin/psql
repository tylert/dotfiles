#!/usr/bin/env bash

BRANCH="${1}"
if [ -z "${BRANCH}" ]; then
    BRANCH="trunk"
fi

case "$(uname -s)" in
    "Darwin") LIGHTSPEED_ROOT="/Library/Application Support/LightSpeed Server Dev ${BRANCH}" ;;
    "Linux") LIGHTSPEED_ROOT="/usr/local/lightspeed_${BRANCH}" ;;
    *) echo "Unable to determine OS type." ; exit 1 ;;
esac

sudo -u _lightspeedserver "${LIGHTSPEED_ROOT}/postgres/bin/psql" \
    -h "${LIGHTSPEED_ROOT}" -d server1
